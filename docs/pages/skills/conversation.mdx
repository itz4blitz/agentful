---
title: Conversation Skill
description: Intent classification and context management for natural language commands
sidebar_position: 1
---

# Conversation Skill

Classifies user intent and manages conversation context for the `/agentful` command.

## What It Provides

**Intent Classification Knowledge**
- Patterns for recognizing feature requests, bug reports, status queries
- Methods for extracting information from natural language
- Ambiguity detection and resolution strategies

**Context Management Procedures**
- How to track conversation state across messages
- Pronoun resolution techniques
- Session continuity patterns

## Intent Categories

The skill defines these intent types:

| Intent | Patterns | Action |
|--------|----------|--------|
| `feature_request` | "add", "create", "implement" | Delegate to orchestrator |
| `bugfix_request` | "fix", "broken", "not working" | Start bugfix workflow |
| `status_query` | "status", "progress", "how's it going" | Read state, report progress |
| `validation_request` | "validate", "check quality", "run tests" | Trigger validation |
| `continue_request` | "continue", "next", "keep going" | Resume last task |
| `product_query` | "what are we building", "show product" | Display product spec |

## How Agents Use This

The `/agentful` command uses this skill to:

1. Read user input
2. Match against intent patterns
3. Extract relevant entities (feature names, requirements)
4. Check conversation history for context
5. Classify intent and route to appropriate handler

## Context Structure

Conversation history stored in `.agentful/conversation-history.json`:

```json
{
  "version": "1.0",
  "session_id": "uuid",
  "messages": [
    {
      "user_input": "Add user authentication",
      "classified_intent": "feature_request",
      "extracted_entities": {
        "feature": "user authentication"
      },
      "timestamp": "2026-01-19T02:00:00Z"
    }
  ],
  "context": {
    "last_intent": "feature_request",
    "last_feature": "user authentication",
    "conversation_state": "active"
  }
}
```

## Examples

### Feature Request
```
Input: "Add user profiles with avatar upload"

Classification:
  intent: feature_request
  entities: {
    feature: "user profiles",
    requirements: ["avatar upload"]
  }

Action: Delegate to orchestrator agent
```

### Status Query
```
Input: "How's authentication going?"

Classification:
  intent: status_query
  target: "authentication"

Action: Read .agentful/state.json, report progress
```

### Context Resolution
```
Message 1: "Add authentication"
Message 2: "Make it use NextAuth"

Context resolution:
  "it" → "authentication" (from last message)

Action: Update authentication approach to use NextAuth
```

## Implementation Details

**Location:** `.claude/skills/conversation/SKILL.md`

**Model:** Sonnet (optimized for language understanding)

**Tools Used:**
- Read (conversation history, state files)
- Write (update conversation history)
- Glob (find relevant files)
- Grep (search for context)
- Task (delegate to specialized handlers)

## Task Delegation Mechanism

The conversation skill routes classified intents to different handlers using the `Task()` function:

```typescript
// Delegate to orchestrator agent for feature development
Task('orchestrator', `Add user authentication
Work Type: FEATURE_DEVELOPMENT
Feature: authentication`)

// Delegate to product-tracking for status queries
Task('product-tracking', `Show status and progress.
Filter: feature authentication`)

// Delegate to validation for quality checks
Task('validation', `Run quality gates. Scope: all`)
```

**Routing Logic:**
- `feature_request` or `bug_report` → `Task('orchestrator', ...)`
- `status_update` → `Task('product-tracking', ...)`
- Validation requests → `Task('validation', ...)`
- Questions and clarifications → Handled inline (no delegation)

## Common Patterns

### Ambiguity Detection
```markdown
If user input matches multiple features:
1. List all matches
2. Ask user to clarify
3. Wait for specific selection
```

### Mind Change Handling
```markdown
If new intent contradicts previous:
1. Detect contradiction
2. Confirm with user
3. Update context to new direction
```

### Session Resumption
```markdown
If >30 minutes since last message:
1. Summarize last state
2. Ask if user wants to continue
3. Provide context refresh
```

## Usage by Commands

**`/agentful`**
- Primary consumer of this skill
- Uses for every user interaction
- Routes based on classified intent

**`/agentful-status`**
- Uses context to understand what "it" refers to
- Determines what progress to show

## Extending the Skill

Add custom intents by editing `.claude/skills/conversation/SKILL.md`:

```markdown
## Custom Intent: deployment_request

Patterns:
- "deploy to [environment]"
- "ship [feature]"
- "release to production"

Action:
1. Extract environment (staging, production)
2. Validate quality gates
3. Delegate to deployment workflow
```

## See Also

- **[/agentful Command](/commands/agentful)** - Uses this skill for intent classification
- **[Orchestrator Agent](/agents/orchestrator)** - Receives delegated feature requests
- **[Product-Tracking Skill](/skills/product-tracking)** - Used for status queries
