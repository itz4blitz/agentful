---
title: Product Tracking Skill
description: Progress calculation and state tracking procedures
sidebar_position: 2
---

# Product-Tracking Skill

Defines methods for calculating feature completion, tracking progress, and managing development state.

## What It Provides

**Progress Calculation Methods**
- How to calculate feature completion percentage
- Subtask weighting strategies
- Overall progress formulas

**State Tracking Structures**
- Completion data format
- Quality gate status format
- Feature status transitions

**Priority Weighting**
- How to weight CRITICAL vs HIGH vs MEDIUM vs LOW
- Priority-based task selection logic

## Progress Formulas

### Feature Progress
```
feature_progress = (completed_subtasks / total_subtasks) √ó 100
```

### Overall Progress
```
overall_progress = weighted_average(all_feature_progress)

where weights:
  CRITICAL = 4x
  HIGH = 3x
  MEDIUM = 2x
  LOW = 1x
```

### Quality Gate Factor
```
if any_critical_gate_failing:
  overall_progress = max(overall_progress - 10, 0)
```

## State Structure

### Completion Tracking
Stored in `.agentful/completion.json`:

```json
{
  "features": {
    "User Authentication": {
      "status": "complete",
      "progress": 100,
      "priority": "CRITICAL",
      "subtasks": {
        "registration": "complete",
        "login": "complete",
        "password_reset": "complete"
      }
    },
    "User Profiles": {
      "status": "in_progress",
      "progress": 45,
      "priority": "HIGH",
      "subtasks": {
        "profile_page": "complete",
        "avatar_upload": "in_progress",
        "settings": "pending"
      }
    }
  },
  "gates": {
    "tests_passing": true,
    "no_type_errors": false,
    "no_dead_code": true,
    "coverage_80": false,
    "security_clean": true
  },
  "overall": 67
}
```

### Status Values
- `pending` - Not started
- `in_progress` - Actively working
- `complete` - All subtasks done, quality gates passed
- `blocked` - Waiting on decision or external dependency

## How Agents Use This

**Orchestrator Agent:**
1. Reads this skill for progress calculation methods
2. Calculates next task based on priority weighting
3. Updates completion.json after each task
4. Uses progress to determine if more work needed

**Status Command:**
1. Reads completion.json
2. Formats progress report using display patterns from skill
3. Shows quality gate status

## Product Structure Support

### Product Specification (.claude/product/)
```
.claude/product/
‚îú‚îÄ‚îÄ index.md           # Features for simple projects
‚îî‚îÄ‚îÄ domains/           # Domains for complex projects
    ‚îú‚îÄ‚îÄ authentication/
    ‚îÇ   ‚îî‚îÄ‚îÄ index.md
    ‚îî‚îÄ‚îÄ profiles/
        ‚îî‚îÄ‚îÄ index.md
```

**Parsing:**
1. Read index.md for features or domain list
2. If domains exist, parse each domain/index.md
3. Calculate progress per feature/domain
4. Aggregate using priority weights

**Feature Format:**
```markdown
## Features

### User Authentication - CRITICAL
- [x] Registration
- [x] Login
- [ ] Password Reset

### User Profiles - HIGH
- [ ] Profile Page
- [ ] Avatar Upload
```

**Calculation:**
1. Find heading with priority tag
2. Count checkboxes (total)
3. Count checked boxes (complete)
4. Calculate: (checked / total) √ó 100

## Priority-Based Selection

When selecting next task:

```
1. Find all pending/in_progress features
2. Sort by priority (CRITICAL ‚Üí HIGH ‚Üí MEDIUM ‚Üí LOW)
3. Within same priority, sort by dependencies
4. Select highest priority unblocked feature
```

Example:
```
Available tasks:
- API Integration (HIGH, 0%, pending)
- User Profiles (HIGH, 45%, in_progress)
- Dashboard (MEDIUM, 0%, pending)

Selection: User Profiles (same HIGH priority, but in_progress = continue)
```

## Quality Gate Tracking

Quality gates from validation skill:

```json
{
  "tests_passing": true,      // All tests pass
  "no_type_errors": false,    // Type checker clean
  "no_lint_errors": true,     // Linter clean
  "no_dead_code": true,       // No unused code
  "coverage_80": false,       // ‚â•80% coverage
  "security_clean": true      // No vulnerabilities
}
```

**Impact on completion:**
- Feature at 100% but gates failing ‚Üí Status remains "in_progress"
- All features at 100% and gates passing ‚Üí Product "complete"

## Progress Display Patterns

### Terminal Output
```
Progress:
  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë 67%

Features:
‚úÖ User Authentication  100%  CRITICAL
üîÑ User Profiles         45%  HIGH
‚è∏  API Integration       0%  MEDIUM
```

### Status Symbols
- ‚úÖ Complete
- üîÑ In Progress
- ‚è∏ Pending
- ‚õî Blocked

### Quality Gates Display
```
Quality Gates:
  ‚úÖ Tests Passing
  ‚ùå Type Errors (3 errors)
  ‚ö†Ô∏è  Coverage (76% - target: 80%)
  ‚úÖ Linting
  ‚úÖ Dead Code
  ‚úÖ Security
```

## Implementation Details

**Location:** `.claude/skills/product-tracking/SKILL.md`

**Model:** Sonnet

**Tools Used:**
- Read (completion state, product spec)
- Write (update completion.json)
- Edit (modify feature status)
- Glob (find domain files)
- Grep (search for features)

**Files:**
- `.agentful/completion.json` - Progress data
- `.agentful/state.json` - Current work state
- `.claude/product/` - Product specification

## Update Procedures

### After Subtask Completion
```markdown
1. Update subtask status to "complete"
2. Recalculate feature progress
3. If all subtasks complete AND gates pass:
   - Set feature status to "complete"
4. Recalculate overall progress
5. Write to completion.json
```

### After Quality Gate Check
```markdown
1. Read validation results
2. Update gates object in completion.json
3. If gates failing:
   - Keep features in "in_progress" even if subtasks done
4. Recalculate overall progress with gate factor
```

## Examples

### Initial State
```json
{
  "features": {},
  "gates": {
    "tests_passing": false,
    "no_type_errors": false,
    "no_dead_code": false,
    "coverage_80": false,
    "security_clean": false
  },
  "overall": 0
}
```

### After First Feature
```json
{
  "features": {
    "User Authentication": {
      "status": "complete",
      "progress": 100,
      "priority": "CRITICAL"
    }
  },
  "gates": {
    "tests_passing": true,
    "no_type_errors": true,
    "no_dead_code": true,
    "coverage_80": true,
    "security_clean": true
  },
  "overall": 100
}
```

### Partial Completion with Gate Failures
```json
{
  "features": {
    "Authentication": {"status": "complete", "progress": 100, "priority": "CRITICAL"},
    "Profiles": {"status": "in_progress", "progress": 100, "priority": "HIGH"}
  },
  "gates": {
    "tests_passing": true,
    "no_type_errors": false,  // ‚Üê Failing
    "no_dead_code": true,
    "coverage_80": false,     // ‚Üê Failing
    "security_clean": true
  },
  "overall": 90  // Would be 100, but gates reduce it
}
```

Note: Profiles shows 100% subtasks but status is "in_progress" because gates failing.

## Usage by Commands

**`/agentful-status`**
- Primary consumer for display
- Reads completion.json
- Formats using display patterns from this skill

**`/agentful-start`**
- Updates completion.json as work progresses
- Uses priority selection logic

**Orchestrator Agent**
- Uses priority weighting to select next task
- Updates progress after each task completion

## Extending the Skill

Add custom progress metrics by editing `.claude/skills/product-tracking/SKILL.md`:

```markdown
## Custom Metric: Documentation Coverage

Formula:
\`\`\`
doc_coverage = (documented_features / total_features) √ó 100
\`\`\`

Storage:
\`\`\`json
{
  "custom_metrics": {
    "documentation_coverage": 85
  }
}
\`\`\`

Display:
\`\`\`
Custom Metrics:
  üìö Documentation: 85%
\`\`\`
```

## See Also

- **[/agentful-status](/commands/agentful-status)** - Displays progress using this skill
- **[Orchestrator Agent](/agents/orchestrator)** - Uses priority weighting for task selection
- **[Validation Skill](/skills/validation)** - Provides quality gate status
