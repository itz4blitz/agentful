---
title: Feature Development Workflow - Agentful
description: End-to-end feature development workflow from requirements to production-ready code with Agentful.
---

# Feature Development Workflow

Complete guide to building features from requirements to production-ready code using Agentful's autonomous development workflow.

---

## Overview

The Feature Development workflow takes a feature requirement from `PRODUCT.md` and transforms it into fully implemented, tested, and validated code through autonomous agent collaboration.

### What This Workflow Delivers

- âœ… Complete feature implementation (frontend + backend)
- âœ… Comprehensive test coverage (â‰¥80%)
- âœ… All validation gates passing
- âœ… No type errors (adapts to stack)
- âœ… No dead code
- âœ… Security-clean code

### Typical Timeline

| Feature Complexity | Time | Iterations |
|-------------------|------|------------|
| **Simple** (CRUD, forms) | 5-30 minutes | 2-5 |
| **Medium** (auth, APIs) | 30-90 minutes | 5-15 |
| **Complex** (real-time, integrations) | 1-4 hours | 15-40 |

---

## Prerequisites

Before starting feature development, ensure:

### 1. Product Specification Complete

Your `PRODUCT.md` should have:

```markdown
### 1. Feature Name - PRIORITY
**Description**: Clear description of what the feature does

**Acceptance Criteria**:
- [ ] Specific requirement 1
- [ ] Specific requirement 2
- [ ] Specific requirement 3

**User Stories** (optional):
- As a [user type]
- I want [action]
- So that [benefit]

**Technical Notes** (optional):
- API endpoints needed
- Database schema changes
- Third-party integrations
```

### 2. Tech Stack Defined

```markdown
## Tech Stack
- **Frontend**: Next.js 14, TypeScript, Tailwind CSS
- **Backend**: Next.js API Routes
- **Database**: PostgreSQL + Prisma
- **Testing**: Vitest + Playwright
- **Styling**: Tailwind CSS
```

### 3. Agentful Initialized

```bash
# Already initialized?
ls .claude/agents/
ls .agentful/

# If not, initialize:
npx agentful init
```

---

## The Feature Development Loop

### Complete Workflow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  START: /agentful-start                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. ARCHITECT ANALYSIS (once per session)                   â”‚
â”‚     â€¢ Read PRODUCT.md tech stack                            â”‚
â”‚     â€¢ Generate tech-specific agents                        â”‚
â”‚     â€¢ Create architecture.json                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. ORCHESTRATOR PLANNING                                   â”‚
â”‚     â€¢ Read state.json (current progress)                   â”‚
â”‚     â€¢ Read completion.json (what's done)                   â”‚
â”‚     â€¢ Read PRODUCT.md (requirements)                       â”‚
â”‚     â€¢ Select next feature to implement                     â”‚
â”‚     â€¢ Check for blockers                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3. FEATURE BREAKDOWN                                       â”‚
â”‚     â€¢ Analyze feature requirements                         â”‚
â”‚     â€¢ Identify backend tasks (APIs, services, DB)          â”‚
â”‚     â€¢ Identify frontend tasks (UI, hooks, pages)           â”‚
â”‚     â€¢ Identify testing tasks (unit, integration, E2E)      â”‚
â”‚     â€¢ Create implementation plan                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4. BACKEND IMPLEMENTATION                                  â”‚
â”‚     â€¢ Delegate to @backend agent                           â”‚
â”‚     â€¢ Implement repositories                               â”‚
â”‚     â€¢ Implement services                                   â”‚
â”‚     â€¢ Implement API routes/controllers                     â”‚
â”‚     â€¢ Database schema changes                              â”‚
â”‚     â€¢ Input validation schemas                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  5. FRONTEND IMPLEMENTATION                                 â”‚
â”‚     â€¢ Delegate to @frontend agent                          â”‚
â”‚     â€¢ Create UI components                                 â”‚
â”‚     â€¢ Create pages/views                                   â”‚
â”‚     â€¢ Create custom hooks                                  â”‚
â”‚     â€¢ Implement state management                          â”‚
â”‚     â€¢ Style with chosen framework                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  6. TESTING                                                 â”‚
â”‚     â€¢ Delegate to @tester agent                            â”‚
â”‚     â€¢ Write unit tests for services                       â”‚
â”‚     â€¢ Write unit tests for components                     â”‚
â”‚     â€¢ Write integration tests for APIs                    â”‚
â”‚     â€¢ Write E2E tests for user flows                      â”‚
â”‚     â€¢ Ensure â‰¥80% coverage                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  7. VALIDATION                                              â”‚
â”‚     â€¢ Delegate to @reviewer agent                          â”‚
â”‚     â€¢ Run TypeScript check (tsc --noEmit)                 â”‚
â”‚     â€¢ Run lint check                                       â”‚
â”‚     â€¢ Run dead code detection                             â”‚
â”‚     â€¢ Run all tests                                        â”‚
â”‚     â€¢ Check coverage â‰¥80%                                  â”‚
â”‚     â€¢ Run security scan                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†“
                    Issues found?
                         â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â†“                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  8a. FIX ITERATION(S)   â”‚  â”‚  8b. FEATURE COMPLETE   â”‚
â”‚     â€¢ @fixer resolves   â”‚  â”‚     â€¢ All checks pass   â”‚
â”‚     â€¢ Re-validate       â”‚  â”‚     â€¢ Update progress   â”‚
â”‚     â€¢ Loop until pass   â”‚  â”‚     â€¢ Mark feature done â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚                     â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  9. UPDATE COMPLETION                                       â”‚
â”‚     â€¢ Update completion.json                               â”‚
â”‚       feature.status = "complete"                          â”‚
â”‚       feature.score = 100                                  â”‚
â”‚     â€¢ Update state.json                                    â”‚
â”‚       increment iterations                                 â”‚
â”‚       clear current_task                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  10. NEXT FEATURE                                          â”‚
â”‚      â€¢ Loop back to step 2                                 â”‚
â”‚      â€¢ Select next priority feature                       â”‚
â”‚      â€¢ Continue until 100% complete                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Step-by-Step Guide

### Step 1: Start the Workflow

```bash
# In Claude Code CLI
/agentful-start
```

**What happens:**
1. Orchestrator reads all state files
2. Checks for pending decisions
3. Selects next feature to work on
4. Begins implementation

**Expected output:**
```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
         Agentful Development Session
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Loaded state: 5 features, 32% complete
Pending decisions: 0
Blocked tasks: 0

Starting development loop...

ğŸ—ï¸  Architect analyzing tech stack...
Detected: Next.js 14, TypeScript, Tailwind, Prisma
Generated: nextjs-agent, prisma-agent, tailwind-agent

ğŸ“‹ Next feature: User Authentication (CRITICAL)
Priority: #1
Status: Not started

â†’ Delegating to specialists...
```

---

### Step 2: Backend Implementation

**Agent:** @backend
**Time:** 5-30 minutes

**What gets built:**

```typescript
// 1. Repository Layer (data access)
// src/repositories/user.repository.ts
export class UserRepository {
  async findById(id: string): Promise<User | null> {
    return db.user.findUnique({ where: { id } });
  }

  async findByEmail(email: string): Promise<User | null> {
    return db.user.findUnique({ where: { email } });
  }

  async create(data: CreateUserInput): Promise<User> {
    return db.user.create({ data });
  }
}

// 2. Service Layer (business logic)
// src/services/auth.service.ts
export class AuthService {
  async register(input: RegisterInput): Promise<User> {
    const existing = await this.userRepo.findByEmail(input.email);
    if (existing) throw new ConflictError('User exists');

    const hashed = await hashPassword(input.password);
    return this.userRepo.create({ ...input, password: hashed });
  }

  async login(email: string, password: string): Promise<AuthResult> {
    const user = await this.userRepo.findByEmail(email);
    if (!user) throw new UnauthorizedError('Invalid credentials');

    const valid = await comparePassword(password, user.password);
    if (!valid) throw new UnauthorizedError('Invalid credentials');

    const token = generateJWT(user);
    return { user, token };
  }
}

// 3. API Routes (HTTP endpoints)
// src/app/api/auth/login/route.ts
export async function POST(req: NextRequest) {
  const body = await req.json();
  const service = new AuthService();

  try {
    const result = await service.login(body.email, body.password);
    return NextResponse.json(result);
  } catch (error) {
    if (error instanceof UnauthorizedError) {
      return NextResponse.json(
        { error: error.message },
        { status: 401 }
      );
    }
    throw error;
  }
}

// 4. Validation Schemas
// src/schemas/auth.schema.ts
export const loginSchema = z.object({
  email: z.string().email('Invalid email'),
  password: z.string().min(8, 'Password min 8 chars'),
});
```

**Backend agent follows this order:**
1. âœ… Repository layer (database access)
2. âœ… Service layer (business logic)
3. âœ… Controller/routes (HTTP endpoints)
4. âœ… Validation schemas (input validation)
5. âœ… Error handling (proper HTTP status codes)

**Output:**
```
ğŸ”§ Backend Agent implementing User Authentication...

Created repositories:
  âœ“ src/repositories/user.repository.ts

Created services:
  âœ“ src/services/auth.service.ts

Created API routes:
  âœ“ src/app/api/auth/login/route.ts
  âœ“ src/app/api/auth/register/route.ts
  âœ“ src/app/api/auth/logout/route.ts

Created schemas:
  âœ“ src/schemas/auth.schema.ts

Backend implementation complete!
Time: 8 minutes
Files: 6 created
```

---

### Step 3: Frontend Implementation

**Agent:** @frontend
**Time:** 5-30 minutes

**What gets built:**

```tsx
// 1. Custom Hooks (state management)
// src/hooks/useAuth.ts
export function useAuth() {
  const [user, setUser] = useState<User | null>(null);
  const [isLoading, setIsLoading] = useState(true);

  const login = async (email: string, password: string) => {
    const res = await fetch('/api/auth/login', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ email, password }),
    });
    const data = await res.json();
    setUser(data.user);
    return data;
  };

  const logout = async () => {
    await fetch('/api/auth/logout', { method: 'POST' });
    setUser(null);
  };

  return { user, isLoading, login, logout };
}

// 2. UI Components
// src/components/ui/Button.tsx
export const Button = forwardRef<HTMLButtonElement, ButtonProps>(
  ({ variant = 'primary', size = 'md', isLoading, children, ...props }, ref) => {
    const baseStyles = 'rounded-lg font-medium transition-colors';
    const variants = {
      primary: 'bg-blue-600 text-white hover:bg-blue-700',
      secondary: 'bg-gray-200 text-gray-900',
    };

    return (
      <button
        ref={ref}
        disabled={isLoading}
        className={`${baseStyles} ${variants[variant]}`}
        {...props}
      >
        {isLoading ? 'Loading...' : children}
      </button>
    );
  }
);

// 3. Feature Components
// src/components/auth/LoginForm.tsx
export function LoginForm() {
  const { login, isLoading } = useAuth();
  const [email, setEmail] = useState('');
  const [password, setPassword] = useState('');

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    try {
      await login(email, password);
      // Redirect on success
    } catch (error) {
      // Show error
    }
  };

  return (
    <form onSubmit={handleSubmit} className="max-w-md mx-auto">
      <input
        type="email"
        value={email}
        onChange={(e) => setEmail(e.target.value)}
        placeholder="Email"
        required
      />
      <input
        type="password"
        value={password}
        onChange={(e) => setPassword(e.target.value)}
        placeholder="Password"
        required
      />
      <Button type="submit" isLoading={isLoading}>
        Sign In
      </Button>
    </form>
  );
}

// 4. Pages
// src/app/login/page.tsx
export default function LoginPage() {
  return (
    <div className="min-h-screen flex items-center justify-center">
      <LoginForm />
    </div>
  );
}
```

**Frontend agent follows this order:**
1. âœ… Custom hooks (business logic hooks)
2. âœ… UI primitives (Button, Input, Modal)
3. âœ… Feature components (LoginForm, UserProfile)
4. âœ… Pages/views (route pages)
5. âœ… Styling (Tailwind classes or chosen framework)

**Output:**
```
ğŸ¨ Frontend Agent implementing User Authentication...

Created hooks:
  âœ“ src/hooks/useAuth.ts
  âœ“ src/hooks/useForm.ts

Created UI components:
  âœ“ src/components/ui/Button.tsx
  âœ“ src/components/ui/Input.tsx
  âœ“ src/components/ui/Modal.tsx

Created feature components:
  âœ“ src/components/auth/LoginForm.tsx
  âœ“ src/components/auth/RegisterForm.tsx

Created pages:
  âœ“ src/app/login/page.tsx
  âœ“ src/app/register/page.tsx

Frontend implementation complete!
Time: 12 minutes
Files: 9 created
```

---

### Step 4: Testing

**Agent:** @tester
**Time:** 10-30 minutes

**What gets built:**

```typescript
// 1. Unit Tests (Services)
// src/services/__tests__/auth.service.test.ts
describe('AuthService', () => {
  it('should register new user with hashed password', async () => {
    const service = new AuthService();
    const result = await service.register({
      email: 'test@example.com',
      password: 'password123',
    });

    expect(result.email).toBe('test@example.com');
    expect(result.password).not.toBe('password123'); // Hashed
  });

  it('should reject duplicate email', async () => {
    const service = new AuthService();
    await service.register({
      email: 'test@example.com',
      password: 'password123',
    });

    await expect(
      service.register({
        email: 'test@example.com',
        password: 'password456',
      })
    ).rejects.toThrow('User already exists');
  });
});

// 2. Unit Tests (Components)
// src/components/__tests__/LoginForm.test.tsx
describe('LoginForm', () => {
  it('should render login form', () => {
    render(<LoginForm />);
    expect(screen.getByPlaceholderText('Email')).toBeInTheDocument();
    expect(screen.getByPlaceholderText('Password')).toBeInTheDocument();
  });

  it('should call login on submit', async () => {
    const { login } = useAuth();
    render(<LoginForm />);

    await fireEvent.change(screen.getByPlaceholderText('Email'), {
      target: { value: 'test@example.com' },
    });
    await fireEvent.click(screen.getByText('Sign In'));

    expect(login).toHaveBeenCalledWith('test@example.com', 'password123');
  });
});

// 3. Integration Tests (API)
// src/app/api/auth/__tests__/login.test.ts
describe('POST /api/auth/login', () => {
  it('should login with valid credentials', async () => {
    const res = await request(app)
      .post('/api/auth/login')
      .send({
        email: 'test@example.com',
        password: 'password123',
      });

    expect(res.status).toBe(200);
    expect(res.body).toHaveProperty('token');
    expect(res.body.user).toHaveProperty('email', 'test@example.com');
  });

  it('should reject invalid credentials', async () => {
    const res = await request(app)
      .post('/api/auth/login')
      .send({
        email: 'test@example.com',
        password: 'wrongpassword',
      });

    expect(res.status).toBe(401);
  });
});

// 4. E2E Tests (User Flows)
// e2e/auth.spec.ts
test.describe('Authentication Flow', () => {
  test('should register and login user', async ({ page }) => {
    await page.goto('/register');

    await page.fill('[name="email"]', 'test@example.com');
    await page.fill('[name="password"]', 'password123');
    await page.click('button[type="submit"]');

    await expect(page).toHaveURL('/dashboard');
    await expect(page.locator('text=Welcome')).toBeVisible();
  });
});
```

**Tester agent ensures:**
- âœ… All services have unit tests
- âœ… All components have unit tests
- âœ… All API endpoints have integration tests
- âœ… Critical flows have E2E tests
- âœ… Coverage â‰¥ 80%

**Output:**
```
ğŸ§ª Tester Agent writing tests...

Created unit tests:
  âœ“ src/services/__tests__/auth.service.test.ts (8 tests)
  âœ“ src/components/__tests__/LoginForm.test.tsx (5 tests)
  âœ“ src/hooks/__tests__/useAuth.test.ts (4 tests)

Created integration tests:
  âœ“ src/app/api/auth/__tests__/login.test.ts (3 tests)
  âœ“ src/app/api/auth/__tests__/register.test.ts (3 tests)

Created E2E tests:
  âœ“ e2e/auth.spec.ts (2 tests)

Running tests...
âœ“ 23 tests passed
âœ“ Coverage: 87%

Testing complete!
Time: 15 minutes
Tests: 23 created
Coverage: 87% (target: 80%)
```

---

### Step 5: Validation

**Agent:** @reviewer
**Time:** 1-2 minutes

**What gets checked:**

```bash
# 1. TypeScript
npx tsc --noEmit
âœ“ No type errors

# 2. Lint
npm run lint
âœ“ No lint errors

# 3. Dead Code
npx knip
âœ“ No unused exports, files, or dependencies

# 4. Tests
npm test
âœ“ 23 tests passed

# 5. Coverage
npm test -- --coverage
âœ“ 87% coverage (â‰¥80% threshold)

# 6. Security
npm audit --production
âœ“ No vulnerabilities
grep -r "console.log" src/
âœ“ No debug logs
grep -rE "password.*=" src/
âœ“ No hardcoded secrets
```

**Reviewer agent runs all checks:**

**Output:**
```
ğŸ” Reviewer Agent validating...

Quality Gates:
  âœ… TypeScript: No errors (0 issues)
  âœ… Lint: No errors (0 issues)
  âœ… Dead Code: None found (0 issues)
  âœ… Tests: All passing (23/23)
  âœ… Coverage: 87% (â‰¥80% threshold)
  âœ… Security: No issues (0 vulnerabilities)

Overall: âœ… PASSED

Feature validation complete!
Time: 45 seconds
```

---

### Step 6: Handle Validation Issues

If validation finds issues:

```
âŒ VALIDATION FAILED

Issues found:
1. Coverage at 72% (needs 80%)
2. console.log in src/auth/login.ts:45
3. Unused export: formatDate in src/utils/date.ts

Delegating to @fixer...
```

**Agent:** @fixer
**Time:** 2-5 minutes

**What gets fixed:**

```typescript
// 1. Add tests to reach 80% coverage
// src/services/__tests__/auth.service.test.ts
describe('AuthService edge cases', () => {
  it('should handle empty password', async () => {
    await expect(
      service.login('test@example.com', '')
    ).rejects.toThrow('Invalid credentials');
  });

  it('should handle malformed email', async () => {
    await expect(
      service.register({ email: 'invalid', password: 'pass123' })
    ).rejects.toThrow();
  });
});

// 2. Remove console.log
// Before:
async function login(email: string, password: string) {
  console.log('Login attempt:', email);  // âŒ Remove
  // ...
}

// After:
async function login(email: string, password: string) {
  // ...
}

// 3. Remove unused export
// Before:
export function formatDate(date: Date): string { ... }  // âŒ Unused
export function parseDate(str: string): Date { ... }

// After:
export function parseDate(str: string): Date { ... }
```

**Output:**
```
ğŸ”§ Fixer Agent resolving issues...

Fixed:
  âœ“ Added 5 edge case tests (coverage 72% â†’ 84%)
  âœ“ Removed console.log from src/auth/login.ts:45
  âœ“ Removed unused export formatDate from src/utils/date.ts

Delegating to @reviewer for re-validation...

ğŸ” Reviewer Agent re-validating...
âœ… All checks passed!

Feature complete after fixes.
Time: 3 minutes
```

---

### Step 7: Completion Update

**Agent:** @orchestrator
**Time:** Instant

**What gets updated:**

```json
// .agentful/completion.json
{
  "features": {
    "authentication": {
      "status": "complete",
      "score": 100,
      "started_at": "2026-01-18T00:00:00Z",
      "completed_at": "2026-01-18T00:45:00Z",
      "notes": "JWT authentication fully implemented with tests"
    }
  },
  "gates": {
    "tests_passing": true,
    "no_type_errors": true,
    "no_dead_code": true,
    "coverage_80": true
  },
  "overall": 25
}

// .agentful/state.json
{
  "version": "1.0",
  "current_task": null,
  "current_phase": "idle",
  "iterations": 12,
  "last_updated": "2026-01-18T00:45:00Z",
  "blocked_on": []
}
```

**Output:**
```
âœ… Feature Complete: User Authentication

Files created: 18
Tests added: 23
Coverage: 87%
Quality gates: All passing

Progress updated:
  Authentication: 0% â†’ 100%
  Overall: 0% â†’ 25%

Next feature: User Profile
Priority: #2
```

---

### Step 8: Next Feature

Workflow automatically loops back to Step 2 for the next feature.

---

## Real Example: Building a Todo App

Let's see the complete workflow for a simple Todo app feature.

### PRODUCT.md Specification

```markdown
## Features

### 1. Add Todo - CRITICAL
**Description**: Users can add new todo items

**Acceptance Criteria**:
- [ ] Input field for new todos
- [ ] Add button
- [ ] Todo appears in list
- [ ] Validation: non-empty text
- [ ] Success feedback

### 2. Toggle Todo - HIGH
**Description**: Users can mark todos as complete

**Acceptance Criteria**:
- [ ] Click todo to toggle completion
- [ ] Visual indicator for completed todos
- [ ] Strike-through text

### 3. Delete Todo - MEDIUM
**Description**: Users can delete todos

**Acceptance Criteria**:
- [ ] Delete button on each todo
- [ ] Confirmation prompt
- [ ] Removes from list
```

---

### Execution Timeline

#### Iteration 1: Add Todo Feature (8 minutes)

```
ğŸ”§ Frontend Agent implementing Add Todo...

Created:
  âœ“ src/hooks/useTodos.ts (todo state management)
  âœ“ src/components/TodoInput.tsx (input form)
  âœ“ src/components/TodoList.tsx (todo list display)
  âœ“ src/app/page.tsx (main page)

ğŸ§ª Tester Agent writing tests...

Created:
  âœ“ src/hooks/__tests__/useTodos.test.ts (6 tests)
  âœ“ src/components/__tests__/TodoInput.test.tsx (4 tests)
  âœ“ src/components/__tests__/TodoList.test.tsx (5 tests)

Coverage: 89%

ğŸ” Reviewer Agent validating...
âœ… All checks passed

âœ… Feature Complete: Add Todo (100%)
```

**Files created:** 7
**Tests added:** 15
**Coverage:** 89%

---

#### Iteration 2: Toggle Todo Feature (5 minutes)

```
ğŸ”§ Frontend Agent implementing Toggle Todo...

Modified:
  âœ“ src/hooks/useTodos.ts (added toggleTodo function)
  âœ“ src/components/TodoList.tsx (click to toggle)

ğŸ§ª Tester Agent writing tests...

Added:
  âœ“ 3 tests for toggleTodo in useTodos.test.ts
  âœ“ 2 tests for click interaction in TodoList.test.tsx

Coverage: 91%

ğŸ” Reviewer Agent validating...
âœ… All checks passed

âœ… Feature Complete: Toggle Todo (100%)
```

**Files modified:** 2
**Tests added:** 5
**Coverage:** 91%

---

#### Iteration 3: Delete Todo Feature (6 minutes)

```
ğŸ”§ Frontend Agent implementing Delete Todo...

Modified:
  âœ“ src/hooks/useTodos.ts (added deleteTodo function)
  âœ“ src/components/TodoList.tsx (added delete button with confirmation)

ğŸ§ª Tester Agent writing tests...

Added:
  âœ“ 3 tests for deleteTodo in useTodos.test.ts
  âœ“ 2 tests for delete interaction in TodoList.test.tsx

Coverage: 92%

ğŸ” Reviewer Agent validating...
âš ï¸  Found 1 issue:
  - Missing test for cancel on confirmation dialog

ğŸ”§ Fixer Agent resolving issue...
Added test for cancel case
Coverage: 93%

ğŸ” Reviewer Agent re-validating...
âœ… All checks passed

âœ… Feature Complete: Delete Todo (100%)
```

**Files modified:** 2
**Tests added:** 6 (including fix)
**Coverage:** 93%

---

### Final Results

```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
          Development Session Complete
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Project: Todo App
Duration: 19 minutes
Iterations: 3

Features Delivered:
  âœ… Add Todo (100%)
  âœ… Toggle Todo (100%)
  âœ… Delete Todo (100%)

Files Created: 7
Files Modified: 4
Tests Added: 26
Test Coverage: 93%

Quality Gates:
  âœ… Tests: 26/26 passing
  âœ… TypeScript: No errors
  âœ… Lint: No issues
  âœ… Dead Code: None
  âœ… Coverage: 93% (â‰¥80%)
  âœ… Security: Clean

ğŸ‰ Todo app complete! Ready for deployment.
```

---

## Manual vs Autonomous Execution

### Manual Mode (Step-by-Step)

**Best for:** Learning, debugging, complex decisions

```bash
# Run one iteration at a time
/agentful-start

# Review output
# Check files created
# Run tests manually

# Run next iteration
/agentful-start
```

**Pros:**
- Full control
- Learn how agents work
- Debug issues easily
- Make decisions at each step

**Cons:**
- Slower overall
- Requires constant attention
- Interrupt-driven

---

### Autonomous Mode (24/7)

**Best for:** Fast delivery, well-defined features

```bash
# Ralph loop - runs continuously
/ralph-loop "/agentful-start" \
  --max-iterations 50 \
  --completion-promise "AGENTFUL_COMPLETE"

# Let it run overnight
# Wake up to completed features
```

**Pros:**
- Fastest delivery
- No manual intervention
- 24/7 development
- Optimal for batches of features

**Cons:**
- Less control
- Can't see progress in real-time
- May need decision interrupts

---

### Hybrid Mode (Recommended)

**Best of both worlds:**

```bash
# Start autonomous
/agentful-start

# [Let it run 30-60 minutes]

# Check progress
/agentful-status

# If decisions needed:
/agentful-decide

# Resume autonomous
/agentful-start

# Check after major milestone
/agentful-validate

# Continue if good, stop if issues
/agentful-start
```

---

## Monitoring Progress

### Real-time Status

```bash
/agentful-status
```

**Output:**
```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
           Agentful Development Status
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Product: Todo App
Overall Progress: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 40%
Phase: implementation
Iterations: 8

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Feature             â”‚ Status   â”‚ Score   â”‚ Notes          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Add Todo            â”‚ âœ… Done  â”‚ 100%    â”‚                â”‚
â”‚ Toggle Todo         â”‚ ğŸ”„ Activeâ”‚ 60%     â”‚ Testing        â”‚
â”‚ Delete Todo         â”‚ â¸ Pendingâ”‚ 0%      â”‚                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Quality Gates:
  âœ… Tests Passing
  âœ… No Type Errors
  âœ… Coverage 91%
  âœ… No Dead Code
  âœ… Security Clean

ğŸ”§ Currently Working On:
   Task: toggle-todo-testing
   Agent: tester
   Started: 2 minutes ago

   Last output: "Writing interaction tests for toggle..."

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Next Actions:
  â€¢ /agentful-start    - Continue development
  â€¢ /agentful-decide  - Answer pending decisions
  â€¢ /agentful-validate- Run quality checks
```

---

### Inspect State Files

```bash
# See what's done
cat .agentful/completion.json

# See current work
cat .agentful/state.json

# Check validation results
cat .agentful/last-review.json
```

---

## Best Practices

### 1. Write Clear Requirements

**Good:**
```markdown
### 1. User Login - CRITICAL
**Description**: Users can log in with email/password

**Acceptance Criteria**:
- [ ] Email input (validation: valid email format)
- [ ] Password input (validation: min 8 chars)
- [ ] Login button (disabled while loading)
- [ ] Success: redirect to dashboard
- [ ] Error: show inline message
- [ ] API: POST /api/auth/login
```

**Bad:**
```markdown
### 1. Login
Users can log in
```

---

### 2. Prioritize Features

Use priority levels:

```markdown
### 1. Core feature - CRITICAL
### 2. Important feature - HIGH
### 3. Nice to have - MEDIUM
```

Agentful works in priority order.

---

### 3. Be Specific About Tech Stack

```markdown
## Tech Stack
- Frontend: Next.js 14 (App Router)
- Styling: Tailwind CSS
- State: React Context + hooks
- Testing: Vitest + Testing Library
```

Specific stack = better code generation.

---

### 4. Let It Complete Features

Don't interrupt mid-feature:

```bash
# Good: Let feature finish
/agentful-start
# [Wait for "Feature Complete" message]

# Bad: Stop early
/agentful-start
# [Interrupt after 5 minutes]
# Feature left incomplete
```

---

### 5. Use Quality Gates

Always validate after features:

```bash
/agentful-start  # Complete feature
/agentful-validate  # Verify quality
/agentful-start  # Next feature
```

---

## Troubleshooting

### Issue: Feature Not Starting

**Symptoms:** `/agentful-start` picks wrong feature

**Solution:**
```bash
# Check completion.json
cat .agentful/completion.json

# Manually update priority
# Set score of desired feature to 0
# Set others to higher values

/agentful-start
```

---

### Issue: Tests Failing

**Symptoms:** Reviewer keeps failing on tests

**Solution:**
```bash
# Run tests manually to see output
npm test

# Check specific test failures
npm test -- --reporter=verbose

# Let Fixer handle it
/agentful-start
```

---

### Issue: Coverage Below 80%

**Symptoms:** Reviewer fails coverage gate

**Solution:**
```bash
# See coverage report
npm test -- --coverage

# Let Fixer add tests
/agentful-start

# Or add tests manually
# Then run /agentful-start
```

---

### Issue: Stuck in Validation Loop

**Symptoms:** Fixer â†’ Reviewer â†’ Fixer â†’ Reviewer...

**Solution:**
```bash
# Check last-review.json
cat .agentful/last-review.json

# Identify recurring issue
# Fix manually if Fixer can't resolve

# Reset state
echo '{"current_task":null}' > .agentful/state.json

# Resume
/agentful-start
```

---

## Next Steps

<div className="grid gap-4 md:grid-cols-2 mt-8">

<div>

### Bug Fixing Workflow

When features have issues, use the bug fixing workflow
â†’ [Bug Fixing Guide](./bug-fixing)

</div>

<div>

### Refactoring Workflow

Improve existing feature code
â†’ [Refactoring Guide](./refactoring)

</div>

<div>

### Testing Workflow

Deep dive on testing strategies
â†’ [Testing Guide](./testing)

</div>

</div>

---

## Quick Reference

**Start Feature Development:**
```bash
/agentful-start
```

**Check Progress:**
```bash
/agentful-status
```

**Resolve Blockers:**
```bash
/agentful-decide
```

**Validate Quality:**
```bash
/agentful-validate
```

**24/7 Mode:**
```bash
/ralph-loop "/agentful-start" \
  --max-iterations 50 \
  --completion-promise "AGENTFUL_COMPLETE"
```
