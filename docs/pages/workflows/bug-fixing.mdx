---
title: Bug Fixing Workflow - agentful
description: Systematic bug resolution workflow from identification to fix, testing, and validation.
---

# Bug Fixing Workflow

Complete guide to identifying, isolating, fixing, and validating bug fixes using agentful's systematic workflow.

---

## Overview

The Bug Fixing workflow takes a bug report and systematically resolves it through reproduction, root cause analysis, fix implementation, regression testing, and validation.

### What This Workflow Delivers

- ‚úÖ Bug reproduction and isolation
- ‚úÖ Root cause identification
- ‚úÖ Minimal, targeted fix
- ‚úÖ Regression tests to prevent recurrence
- ‚úÖ All validation gates passing
- ‚úÖ Documentation of the fix

### Typical Timeline

| Bug Severity | Time | Iterations |
|--------------|------|------------|
| **Trivial** (typos, simple fixes) | 2-5 minutes | 1-2 |
| **Minor** (UI glitches, edge cases) | 5-15 minutes | 2-5 |
| **Moderate** (logic errors, data flow) | 15-45 minutes | 5-10 |
| **Major** (broken features, crashes) | 45 min - 2 hours | 10-20 |

---

## Prerequisites

Before starting bug fixing, ensure:

### 1. Bug Report Available

Create or locate a bug report with:

```markdown
## Bug Report

### Title
[Clear, concise bug description]

### Severity
[Critical / High / Medium / Low / Trivial]

### Environment
- Browser/OS: Chrome 121 / macOS
- User actions: Steps to reproduce
- Frequency: Always / Sometimes / Once

### Steps to Reproduce
1. Go to /dashboard
2. Click "New Todo" button
3. Enter todo text
4. Press Enter
5. Bug occurs

### Expected Behavior
Todo should be added to list

### Actual Behavior
Todo not visible, console error shown

### Error Messages
TypeError: Cannot read property 'map' of undefined

### Screenshots/Videos
[Attach if applicable]
```

### 2. Codebase Accessible

```bash
# Repository available
git status

# Dependencies installed
npm install

Can run tests
npm test

Can run dev server
npm run dev
```

### 3. agentful Initialized

```bash
# agentful ready
ls .claude/agents/
ls .agentful/
```

---

## The Bug Fixing Loop

### Complete Workflow Diagram

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  START: Bug Report Received                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                           ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  1. BUG REPORTING                                           ‚îÇ
‚îÇ     ‚Ä¢ Document bug details                                  ‚îÇ
‚îÇ     ‚Ä¢ Severity assessment                                   ‚îÇ
‚îÇ     ‚Ä¢ Environment information                              ‚îÇ
‚îÇ     ‚Ä¢ Steps to reproduce                                   ‚îÇ
‚îÇ     ‚Ä¢ Error messages/stack traces                          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                           ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  2. BUG REPRODUCTION                                        ‚îÇ
‚îÇ     ‚Ä¢ Delegate to appropriate agent (@frontend or @backend) ‚îÇ
‚îÇ     ‚Ä¢ Follow reproduction steps                            ‚îÇ
‚îÇ     ‚Ä¢ Verify bug exists                                    ‚îÇ
‚îÇ     ‚Ä¢ Capture error details                                ‚îÇ
‚îÇ     ‚Ä¢ Identify affected files                              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                           ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  3. ROOT CAUSE ANALYSIS                                    ‚îÇ
‚îÇ     ‚Ä¢ Inspect stack traces                                 ‚îÇ
‚îÇ     ‚Ä¢ Trace data flow                                      ‚îÇ
‚îÇ     ‚Ä¢ Check recent changes (git log)                      ‚îÇ
‚îÇ     ‚Ä¢ Identify exact line causing issue                   ‚îÇ
‚îÇ     ‚Ä¢ Understand why bug occurs                           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                           ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  4. FIX IMPLEMENTATION                                      ‚îÇ
‚îÇ     ‚Ä¢ Delegate to specialist agent                         ‚îÇ
‚îÇ     ‚Ä¢ Implement minimal fix                                ‚îÇ
‚îÇ     ‚Ä¢ Don't refactor (separate workflow)                  ‚îÇ
‚îÇ     ‚Ä¢ Add inline comment explaining fix                    ‚îÇ
‚îÇ     ‚Ä¢ Ensure no side effects                               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                           ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  5. REGRESSION TESTING                                     ‚îÇ
‚îÇ     ‚Ä¢ Delegate to @tester agent                           ‚îÇ
‚îÇ     ‚Ä¢ Write test that reproduces bug                     ‚îÇ
‚îÇ     ‚Ä¢ Verify test fails before fix                        ‚îÇ
‚îÇ     ‚Ä¢ Verify test passes after fix                        ‚îÇ
‚îÇ     ‚Ä¢ Add related edge case tests                         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                           ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  6. VALIDATION                                              ‚îÇ
‚îÇ     ‚Ä¢ Delegate to @reviewer agent                          ‚îÇ
‚îÇ     ‚Ä¢ Run all quality checks                              ‚îÇ
‚îÇ     ‚Ä¢ Ensure no regressions                               ‚îÇ
‚îÇ     ‚Ä¢ Verify fix doesn't break other features            ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                           ‚Üì
                    Issues found?
                         ‚îÇ
              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
              ‚Üì                     ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  7a. FIX ITERATION(S)   ‚îÇ  ‚îÇ  7b. BUG FIXED          ‚îÇ
‚îÇ     ‚Ä¢ @fixer resolves   ‚îÇ  ‚îÇ     ‚Ä¢ All checks pass   ‚îÇ
‚îÇ     ‚Ä¢ Re-validate       ‚îÇ  ‚îÇ     ‚Ä¢ Update progress   ‚îÇ
‚îÇ     ‚Ä¢ Loop until pass   ‚îÇ  ‚îÇ     ‚Ä¢ Mark bug resolved ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
              ‚îÇ                     ‚îÇ
              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                         ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  8. DOCUMENTATION                                           ‚îÇ
‚îÇ     ‚Ä¢ Update .agentful/completion.json                    ‚îÇ
‚îÇ     ‚Ä¢ Add bug to "bugs-resolved" count                    ‚îÇ
‚îÇ     ‚Ä¢ Document fix in commit message                      ‚îÇ
‚îÇ     ‚Ä¢ Update related documentation if needed              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                         ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  9. NEXT BUG / FEATURE                                     ‚îÇ
‚îÇ      ‚Ä¢ Loop back to bug queue or feature queue            ‚îÇ
‚îÇ      ‚Ä¢ Continue until all bugs resolved                   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## Step-by-Step Guide

### Step 1: Report the Bug

**Input:** Bug discovery or user report

**Bug Report Template:**

```markdown
## Bug: Navigation broken on mobile

**Severity:** High
**Priority:** P1

**Environment:**
- Device: iPhone 12
- Browser: Safari 16
- Screen size: 390x844
- App version: 1.2.0

**Steps to Reproduce:**
1. Open app on mobile device
2. Navigate to Settings page
3. Tap "Notifications" menu item
4. Navigation menu remains open

**Expected Behavior:**
Navigation menu should close after selection

**Actual Behavior:**
Menu stays open, overlaying content

**Console Output:**
```
Warning: setState(...): Can only update a mounted or mounting component.
```

**Frequency:**
Always (100% reproducible)

**Impact:**
Users cannot navigate effectively on mobile devices

**Workaround:**
Manually close menu by tapping outside
```

**Create bug report file:**

```bash
# Create bug report
cat > .agentful/bugs/mobile-navigation.md << 'EOF'
[Paste bug report template above]
EOF
```

---

### Step 2: Reproduce the Bug

**Agent:** @frontend (for UI bugs) or @backend (for API bugs)
**Time:** 2-10 minutes

**Agent actions:**

```typescript
// Frontend Agent reproducing mobile navigation bug

// 1. Start dev server
// npm run dev

// 2. Access on mobile viewport (390x844)
// 3. Navigate to /settings
// 4. Click "Notifications"
// 5. Observe: Menu still open

// 6. Check browser console
// Warning: setState(...): Can only update a mounted or mounting component.

// 7. Identify affected files
// - src/components/Navigation.tsx
// - src/components/MobileMenu.tsx

// 8. Inspect the code
// src/components/MobileMenu.tsx
export function MobileMenu() {
  const [isOpen, setIsOpen] = useState(false);

  const handleItemClick = (item: string) => {
    router.push(item);  // Navigation happens
    setIsOpen(false);   // ‚ùå Bug: Component might unmount during navigation
  };

  return (
    <Menu isOpen={isOpen}>
      {items.map(item => (
        <MenuItem onClick={() => handleItemClick(item.path)}>
          {item.label}
        </MenuItem>
      ))}
    </Menu>
  );
}
```

**Output:**

```
üîç Frontend Agent reproducing bug...

Reproducing steps:
  ‚úì Opened dev server (http://localhost:3000)
  ‚úì Set viewport to 390x844 (mobile)
  ‚úì Navigated to /settings
  ‚úì Clicked "Notifications" menu item

Bug reproduced:
  ‚úÖ Menu remains open after navigation
  ‚úÖ Console warning: setState(...) on unmounted component
  ‚úÖ Overlay blocks content interaction

Affected files identified:
  ‚Ä¢ src/components/MobileMenu.tsx (line 15)
  ‚Ä¢ src/components/Navigation.tsx (line 8)

Root cause hypothesis:
  setState called after component unmounts during navigation

Time: 4 minutes
```

---

### Step 3: Root Cause Analysis

**Agent:** @frontend or @backend
**Time:** 3-10 minutes

**Agent analysis:**

```typescript
// Root cause analysis

// 1. Check component lifecycle
export function MobileMenu() {
  const [isOpen, setIsOpen] = useState(false);
  const mountedRef = useRef(true);  // ‚ùå Missing mount tracking

  const handleItemClick = (item: string) => {
    router.push(item);              // This triggers unmount
    setTimeout(() => {              // ‚ùå Delayed setState
      setIsOpen(false);             // Component might be unmounted here
    }, 100);
  };

  return <Menu>...</Menu>;
}

// 2. Why does this happen?
// - router.push() triggers navigation
// - Navigation causes component unmount
// - setTimeout delays setIsOpen
// - setIsOpen runs after unmount ‚Üí Warning

// 3. Check git history for recent changes
// $ git log --oneline -10
// abc1234 feat: add mobile navigation (2 days ago)
// def5678 fix: menu animation timing

// 4. The bug was introduced in abc1234

// 5. Exact line causing issue:
// src/components/MobileMenu.tsx:15
// setIsOpen(false) called after navigation
```

**Root cause identified:**

```
üî¨ Root Cause Analysis

ROOT CAUSE:
  setState called after component unmounts during navigation

AFFECTED CODE:
  src/components/MobileMenu.tsx, line 15

EXPLANATION:
  1. User clicks menu item
  2. router.push() triggers navigation (line 14)
  3. Navigation causes MobileMenu component to unmount
  4. setTimeout fires (line 15)
  5. setIsOpen(false) called on unmounted component
  6. React warns about setState on unmounted component

WHY IT HAPPENS:
  Navigation is synchronous, setState is delayed by setTimeout
  Component unmounts before setState executes

INTRODUCED IN:
  Commit abc1234 (2 days ago)
  "feat: add mobile navigation"

IMPACT:
  Mobile users cannot navigate properly
  Menu stays open blocking content

Time: 6 minutes
```

---

### Step 4: Implement Fix

**Agent:** @frontend
**Time:** 2-5 minutes

**Fix implementation:**

```typescript
// BEFORE (buggy code)
export function MobileMenu() {
  const [isOpen, setIsOpen] = useState(false);

  const handleItemClick = (item: string) => {
    router.push(item);
    setTimeout(() => {
      setIsOpen(false);  // ‚ùå Bug: setState after unmount
    }, 100);
  };

  return <Menu>...</Menu>;
}

// AFTER (fixed code)
export function MobileMenu() {
  const [isOpen, setIsOpen] = useState(false);

  const handleItemClick = (item: string) => {
    setIsOpen(false);   // ‚úÖ Fix: Close menu BEFORE navigation
    router.push(item);  // ‚úÖ Navigation happens after menu closes
  };

  return <Menu>...</Menu>;
}

// Alternative fix (if animation needed):
export function MobileMenu() {
  const [isOpen, setIsOpen] = useState(false);
  const isMountedRef = useRef(true);

  useEffect(() => {
    return () => {
      isMountedRef.current = false;  // Track unmount
    };
  }, []);

  const handleItemClick = (item: string) => {
    router.push(item);

    setTimeout(() => {
      if (isMountedRef.current) {     // ‚úÖ Check if still mounted
        setIsOpen(false);
      }
    }, 100);
  };

  return <Menu>...</Menu>;
}
```

**Minimal fix principle:**
- ‚úÖ Fix the bug only
- ‚ùå Don't refactor (use separate workflow)
- ‚úÖ Add comment explaining fix
- ‚úÖ No side effects

**Output:**

```
üîß Frontend Agent implementing fix...

Modified:
  ‚úì src/components/MobileMenu.tsx

Changes:
  - Moved setIsOpen(false) before router.push()
  - Added comment explaining fix
  - Removed unnecessary setTimeout

Diff:
  -   const handleItemClick = (item: string) => {
  -     router.push(item);
  -     setTimeout(() => {
  -       setIsOpen(false);
  -     }, 100);
  -   };
  +   const handleItemClick = (item: string) => {
  +     setIsOpen(false);  // Close menu before navigation
  +     router.push(item);
  +   };

Fix applied successfully!
Time: 2 minutes
```

---

### Step 5: Regression Testing

**Agent:** @tester
**Time:** 5-15 minutes

**Test implementation:**

```typescript
// 1. Test that reproduces bug
// src/components/__tests__/MobileMenu.test.tsx
describe('MobileMenu', () => {
  it('should close menu after navigation', async () => {
    const mockRouter = {
      push: vi.fn(),
    };

    render(<MobileMenu />);

    // Open menu
    fireEvent.click(screen.getByText('Menu'));
    expect(screen.getByRole('menu')).toBeVisible();

    // Click menu item
    fireEvent.click(screen.getByText('Notifications'));

    // Verify menu closed
    await waitFor(() => {
      expect(screen.queryByRole('menu')).not.toBeVisible();
    });

    // Verify navigation occurred
    expect(mockRouter.push).toHaveBeenCalledWith('/settings/notifications');
  });

  it('should not cause setState warning on unmount', async () => {
    const mockRouter = {
      push: vi.fn(),
    };

    const { unmount } = render(<MobileMenu />);

    // Open menu
    fireEvent.click(screen.getByText('Menu'));

    // Click item that causes navigation/unmount
    fireEvent.click(screen.getByText('Notifications'));

    // Unmount manually (simulating navigation)
    unmount();

    // Should not throw setState warning
    // Test will fail if setState called after unmount
    expect(() => {
      // Small delay to catch any delayed setState calls
      vi.advanceTimersByTime(200);
    }).not.toThrow();
  });

  it('should handle rapid menu item clicks', async () => {
    const mockRouter = {
      push: vi.fn(),
    };

    render(<MobileMenu />);

    // Open menu
    fireEvent.click(screen.getByText('Menu'));

    // Rapidly click multiple items
    fireEvent.click(screen.getByText('Notifications'));
    fireEvent.click(screen.getByText('Profile'));
    fireEvent.click(screen.getByText('Settings'));

    // Should only navigate once (last click)
    expect(mockRouter.push).toHaveBeenCalledTimes(1);
    expect(mockRouter.push).toHaveBeenCalledWith('/settings');

    // Menu should be closed
    expect(screen.queryByRole('menu')).not.toBeVisible();
  });
});

// 2. Integration test for full navigation flow
// e2e/mobile-navigation.spec.ts
test.describe('Mobile Navigation', () => {
  test('should close menu after navigation', async ({ page }) => {
    // Set mobile viewport
    await page.setViewportSize({ width: 390, height: 844 });

    // Navigate to settings
    await page.goto('/settings');

    // Open menu
    await page.click('[aria-label="Menu"]');
    await expect(page.locator('[role="menu"]')).toBeVisible();

    // Click menu item
    await page.click('text=Notifications');

    // Verify menu closed
    await expect(page.locator('[role="menu"]')).not.toBeVisible();

    // Verify navigation occurred
    await expect(page).toHaveURL('/settings/notifications');

    // Verify no console errors
    const errors = [];
    page.on('console', msg => {
      if (msg.type() === 'error') errors.push(msg.text());
    });

    expect(errors.length).toBe(0);
  });
});
```

**Output:**

```
üß™ Tester Agent writing regression tests...

Created:
  ‚úì src/components/__tests__/MobileMenu.test.tsx (3 tests)
  ‚úì e2e/mobile-navigation.spec.ts (1 test)

Running tests...

Before fix:
  ‚úó should close menu after navigation (FAILED)
    Expected menu to close, but it remained open

  ‚úó should not cause setState warning (FAILED)
    setState warning detected in console

After fix:
  ‚úì should close menu after navigation (PASSED)
  ‚úì should not cause setState warning (PASSED)
  ‚úì should handle rapid menu item clicks (PASSED)

Regression tests added: 4
Coverage: +12% for MobileMenu component
Time: 8 minutes
```

---

### Step 6: Validation

**Agent:** @reviewer
**Time:** 1-2 minutes

**Validation checks:**

```bash
# 1. TypeScript
npx tsc --noEmit
‚úì No type errors

# 2. Lint
npm run lint
‚úì No lint errors

# 3. Dead Code
npx knip
‚úì No dead code

# 4. Tests
npm test
‚úì All tests passing (including new regression tests)

# 5. Coverage
npm test -- --coverage
‚úì Coverage maintained (no decrease)

# 6. Security
npm audit --production
‚úì No vulnerabilities

# 7. Regression check
# Verify fix doesn't break other navigation
npm test -- --testNamePattern="Navigation"
‚úì All navigation tests still passing
```

**Output:**

```
üîç Reviewer Agent validating fix...

Quality Gates:
  ‚úÖ TypeScript: No errors (0 issues)
  ‚úÖ Lint: No errors (0 issues)
  ‚úÖ Dead Code: None (0 issues)
  ‚úÖ Tests: All passing (47/47)
  ‚úÖ Coverage: 84% (maintained)
  ‚úÖ Security: No issues (0 vulnerabilities)
  ‚úÖ Regression: No broken features

Overall: ‚úÖ PASSED

Bug fix validated!
Time: 45 seconds
```

---

### Step 7: Update Completion

**Agent:** @orchestrator
**Time:** Instant

**State update:**

```json
// .agentful/completion.json
{
  "bugs_resolved": {
    "mobile-navigation": {
      "id": "bug-001",
      "title": "Navigation broken on mobile",
      "severity": "High",
      "status": "resolved",
      "fixed_at": "2026-01-18T01:30:00Z",
      "files_modified": [
        "src/components/MobileMenu.tsx"
      ],
      "tests_added": 4,
      "commit_hash": "xyz789"
    }
  },
  "bugs_active": []
}

// .agentful/state.json
{
  "current_task": null,
  "current_phase": "idle",
  "iterations": 3,
  "bugs_fixed_this_session": 1
}
```

**Commit message:**

```bash
git add .
git commit -m "fix: close mobile menu before navigation

Fixes bug where mobile navigation menu remained open after
menu item selection, blocking content interaction.

Root cause:
setState called after component unmounts during navigation.

Solution:
Close menu synchronously before triggering navigation.

Tests:
- Added 3 unit tests for menu close behavior
- Added 1 E2E test for mobile navigation flow
- Verified no setState warnings in console

Fixes: #123
```

**Output:**

```
‚úÖ Bug Fixed: Mobile Navigation

Severity: High
Time to fix: 22 minutes
Iterations: 3

Files modified: 1
Tests added: 4
Coverage maintained: 84%

Quality gates: All passing
Regressions: None detected

Bug resolved and committed!
Commit: xyz789
```

---

## Real Example: Debugging API Error

### Bug Report

```markdown
## Bug: User profile returns 500 error

**Severity:** High

**Steps to Reproduce:**
1. Login as user
2. Navigate to /profile
3. Page shows error message

**Expected:**
Profile page displays user information

**Actual:**
"Internal server error" message

**Console:**
GET /api/user/profile 500
```

---

### Reproduction

**Agent:** @backend

```typescript
// Backend Agent reproducing bug

// 1. Start dev server
// npm run dev

// 2. Make API request
// GET /api/user/profile

// 3. Observe error
// Error: Cannot read property 'email' of undefined

// 4. Check server logs
// TypeError: Cannot read property 'email' of undefined
//    at src/services/user.service.ts:15

// 5. Inspect the code
// src/app/api/user/profile/route.ts
export async function GET(req: NextRequest) {
  const session = await getSession(req);  // Returns null if not authenticated

  const service = new UserService();
  const profile = await service.getProfile(session.user.id);  // ‚ùå session is null
                                                    //        ‚Üë
// src/services/user.service.ts                             Error here
export class UserService {
  async getProfile(userId: string) {
    return this.userRepository.findById(userId);
  }
}
```

**Root cause:**

```
ROOT CAUSE:
  getSession() returns null, code doesn't handle this case

AFFECTED CODE:
  src/app/api/user/profile/route.ts:8

EXPLANATION:
  1. User session expires or is invalid
  2. getSession() returns null
  3. Code tries to access null.user.id
  4. TypeError: Cannot read property 'email' of undefined

FIX NEEDED:
  Add null check for session before accessing user data
```

---

### Fix Implementation

```typescript
// BEFORE (buggy)
export async function GET(req: NextRequest) {
  const session = await getSession(req);

  const service = new UserService();
  const profile = await service.getProfile(session.user.id);  // ‚ùå Crashes

  return NextResponse.json(profile);
}

// AFTER (fixed)
export async function GET(req: NextRequest) {
  const session = await getSession(req);

  // ‚úÖ Handle null session
  if (!session || !session.user) {
    return NextResponse.json(
      { error: 'Unauthorized' },
      { status: 401 }
    );
  }

  const service = new UserService();
  const profile = await service.getProfile(session.user.id);

  return NextResponse.json(profile);
}
```

---

### Regression Tests

```typescript
// src/app/api/user/__tests__/profile.test.ts
describe('GET /api/user/profile', () => {
  it('should return user profile for authenticated user', async () => {
    const session = { user: { id: '123', email: 'test@example.com' } };
    getSession.mockResolvedValue(session);

    const res = await request(app).get('/api/user/profile');

    expect(res.status).toBe(200);
    expect(res.body).toHaveProperty('email', 'test@example.com');
  });

  it('should return 401 when session is null', async () => {
    getSession.mockResolvedValue(null);  // Simulate expired session

    const res = await request(app).get('/api/user/profile');

    expect(res.status).toBe(401);
    expect(res.body).toHaveProperty('error', 'Unauthorized');
  });

  it('should return 401 when session.user is missing', async () => {
    const session = {};  // Session exists but no user
    getSession.mockResolvedValue(session);

    const res = await request(app).get('/api/user/profile');

    expect(res.status).toBe(401);
    expect(res.body).toHaveProperty('error', 'Unauthorized');
  });
});
```

---

### Result

```
‚úÖ Bug Fixed: User Profile API Error

Files modified: 1
Tests added: 3
Time: 18 minutes

Validation: All gates passing
Regressions: None
```

---

## Handling Edge Cases

### Case 1: Bug Can't Be Reproduced

```
üîç Attempting to reproduce bug...

Following steps:
  1. Go to /dashboard ‚úì
  2. Click "Export" ‚úì
  3. Wait for download...

Result: ‚úó Bug NOT reproduced
  Download worked correctly

Possible reasons:
  - Environment-specific (browser, OS, device)
  - Timing/race condition
  - Already fixed in latest version
  - Incomplete reproduction steps

Action:
  Added to decisions.json for user input:
  "Unable to reproduce bug. Please provide:
   - Browser version
   - Console errors
   - Network tab errors
   - Screenshots/video"

Run /agentful-decide to provide more information.
```

---

### Case 2: Multiple Root Causes

```
üî¨ Root cause analysis...

Multiple potential causes identified:

1. Race condition in data fetching (src/hooks/useData.ts:23)
2. Missing error boundary in component tree
3. API returning inconsistent data types

Recommended approach:
  Fix most likely cause first (race condition)
  Add regression tests
  Validate
  If bug persists, fix next cause

Delegating to @frontend to fix race condition...
```

---

### Case 3: Fix Causes New Bugs

```
üîç Validating fix...

‚ùå VALIDATION FAILED

New issues found:
  1. Test: mobile-menu-spacing (FAILED)
     Menu now closes too quickly, animation looks jerky

  2. Test: rapid-navigation (FAILED)
     Second navigation not working

Action: Reverting fix, using alternative approach

üîß Implementing alternative fix...
  Using isMountedRef pattern instead
  Preserves animation while preventing setState error

‚úÖ Validation passed
```

---

## Best Practices

### 1. Create Detailed Bug Reports

Good bug reports speed up fixing:

**Good:**
```markdown
## Steps to Reproduce
1. Go to /dashboard
2. Click "Add Widget" button
3. Select "Weather" widget
4. Click "Add"
5. Widget not visible

## Expected
Weather widget appears on dashboard

## Actual
Widget not visible, console error:
"TypeError: widget.type is undefined"

## Environment
Chrome 121, macOS 14, screen size 1920x1080
```

**Bad:**
```markdown
## Bug
Dashboard not working

## What I did
Clicked some buttons

## What happened
Doesn't work
```

---

### 2. Fix Root Cause, Not Symptoms

**Symptom fix (bad):**
```typescript
// Suppress the error
try {
  setIsOpen(false);
} catch (e) {
  // Ignore error
}
```

**Root cause fix (good):**
```typescript
// Fix the actual problem
setIsOpen(false);  // Before navigation
router.push(item);
```

---

### 3. Add Regression Tests

Always add tests that:
- Reproduce the bug
- Verify the fix
- Prevent recurrence

```typescript
it('should [description of bug]', () => {
  // Arrange: Setup conditions that caused bug
  // Act: Perform actions that triggered bug
  // Assert: Verify bug is fixed
});
```

---

### 4. Don't Refactor While Fixing

Fixing bugs ‚â† Refactoring

**Fix bugs:**
- Minimal change
- Addresses specific issue
- No unrelated changes

**Refactor separately:**
- Use refactoring workflow
- Comprehensive changes
- Improves overall structure

---

### 5. Document the Fix

Add clear comments:

```typescript
// Fix: Close menu before navigation to prevent setState on unmounted component
// Bug: Menu remained open after navigation, blocking content
// Solution: Synchronous menu close prior to router.push()
const handleItemClick = (item: string) => {
  setIsOpen(false);
  router.push(item);
};
```

---

## Monitoring Bug Fixes

### Track Fixed Bugs

```bash
# See all resolved bugs
cat .agentful/completion.json | grep bugs_resolved

# Check recent commits
git log --oneline --grep="fix" -10
```

---

### Bug Metrics

Track in completion.json:

```json
{
  "bugs_resolved": {
    "this_session": 3,
    "this_week": 12,
    "total": 47
  },
  "bug_severity_breakdown": {
    "critical": 2,
    "high": 15,
    "medium": 20,
    "low": 10
  },
  "average_fix_time": {
    "critical": "45 minutes",
    "high": "25 minutes",
    "medium": "15 minutes",
    "low": "8 minutes"
  }
}
```

---

## Next Steps

<div className="grid gap-4 md:grid-cols-2 mt-8">

<div>

### Feature Development

After fixing bugs, continue building features
‚Üí [Feature Development Guide](./feature-development)

</div>

<div>

### Refactoring

Improve code quality with refactoring workflow
‚Üí [Refactoring Guide](./refactoring)

</div>

</div>

---

## Quick Reference

**Report Bug:**
```bash
# Create bug report
cat > .agentful/bugs/bug-name.md << 'EOF'
[Paste bug report template]
EOF
```

**Start Bug Fix:**
```bash
/agentful-start
# Automatically picks up bug from bugs/ directory
```

**Check Bug Status:**
```bash
/agentful-status
# Shows active and resolved bugs
```

**Validate Fix:**
```bash
/agentful-validate
# Ensures no regressions
```
