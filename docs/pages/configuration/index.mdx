# Configuration Overview

Agentful provides a flexible configuration system that lets you customize every aspect of autonomous product development. Configuration is split between project-level settings and Agentful's internal configuration.

## Configuration Structure

```
.your-project/
├── .claude/                    # Claude Code + Agentful config
│   ├── settings.json           # Global settings (hooks, permissions)
│   ├── agents/                 # Agent definitions
│   ├── commands/               # Slash command definitions
│   └── skills/                 # Reusable skill modules
├── .agentful/                  # Runtime state (gitignored)
│   ├── state.json              # Current work state
│   ├── completion.json         # Progress tracking
│   ├── decisions.json          # Pending/resolved decisions
│   └── architecture.json       # Tech stack detection
├── PRODUCT.md                  # Your product specification
└── CLAUDE.md                   # Agentful usage guide
```

## Configuration Files

### Core Files

| File | Purpose | Edit? |
|------|---------|-------|
| `.claude/settings.json` | Hooks, permissions, global settings | Yes |
| `PRODUCT.md` | Product requirements and tech stack | Yes (required) |
| `CLAUDE.md` | Project-specific Agentful instructions | Optional |
| `.agentful/*.json` | Runtime state (auto-generated) | No |

### Generated Files

| File | Purpose | Generated By |
|------|---------|--------------|
| `.agentful/state.json` | Current work state | CLI init |
| `.agentful/completion.json` | Feature progress | Orchestrator |
| `.agentful/decisions.json` | User decisions | Orchestrator |
| `.agentful/architecture.json` | Tech stack info | Architect agent |
| `.agentful/last-validation.json` | Validation results | Reviewer agent |

## Quick Start Configuration

### 1. Initialize Agentful

```bash
npx agentful init
```

This creates:
- `.claude/` directory with all agents and commands
- `.agentful/` directory for runtime state
- `PRODUCT.md` template
- `CLAUDE.md` usage guide
- Updates `.gitignore` to exclude `.agentful/`

### 2. Configure Your Product

Edit `PRODUCT.md` with your product details:

```markdown
# Product Specification

## Overview
A task management application for teams.

## Tech Stack

### Frontend
- **Framework**: Next.js 14
- **Language**: TypeScript
- **Styling**: Tailwind CSS

### Backend
- **Framework**: Next.js API Routes
- **Database**: PostgreSQL + Prisma
- **Auth**: JWT

## Features

### 1. Authentication - CRITICAL
- Login with email/password
- JWT token generation
- Session management
```

### 3. Customize Agents (Optional)

Edit agents in `.claude/agents/` to match your preferences:

```bash
# Customize backend agent patterns
edit .claude/agents/backend.md

# Add custom validation rules
edit .claude/skills/validation/SKILL.md
```

### 4. Adjust Settings

Edit `.claude/settings.json` for hooks and permissions:

```json
{
  "hooks": {
    "PostToolUse": [
      {
        "matcher": "Edit|Write",
        "hooks": [
          {
            "type": "command",
            "command": "npm run lint"
          }
        ]
      }
    ]
  },
  "permissions": {
    "allow": [
      "Bash(npm:*)",
      "Bash(npx:*)",
      "Bash(git:*)"
    ]
  }
}
```

## Configuration Layers

Agentful configuration applies in layers (highest priority first):

1. **Project-level** - `PRODUCT.md`, `CLAUDE.md`
2. **Agent-level** - Individual agent definitions in `.claude/agents/`
3. **Skill-level** - Reusable skills in `.claude/skills/`
4. **Global-level** - `.claude/settings.json`

## Environment-Specific Configuration

### Development

```bash
# Use default settings
npx agentful init

# Edit PRODUCT.md for dev-specific features
# - Enable debug mode
# - Use mock services
# - Add dev tools
```

### Production

```bash
# Update PRODUCT.md with production requirements
# - Set production API endpoints
# - Enable all security features
# - Configure performance monitoring

# Adjust permissions in settings.json
{
  "permissions": {
    "deny": [
      "Bash(npm:dev*)",
      "Bash(npm:test*)"
    ]
  }
}
```

### Staging

Create environment-specific config:

```bash
# Copy PRODUCT.md
cp PRODUCT.md PRODUCT.staging.md

# Use staging-specific config
claude --config PRODUCT.staging.md
```

## Next Steps

- [Project Structure](./project-structure) - Required files and directory layout
- [Agent Configuration](./agent-configuration) - Customizing agents for your stack
- [Workflow Configuration](./workflow-configuration) - Custom commands and workflows
