# agentful Agents

agentful uses a multi-agent system where each agent has specialized responsibilities. The agents work together autonomously to build, test, and validate production-ready applications.

## Agent Architecture

agentful follows a hierarchical agent architecture with clear separation of concerns:

```
Orchestrator (Coordinator)
    ├── Architect (Tech Stack Analyzer)
    ├── Product Analyzer (Requirements Analyzer)
    ├── Backend (Server-Side Implementation)
    ├── Frontend (Client-Side Implementation)
    ├── Tester (Quality Assurance)
    ├── Reviewer (Code Quality Validator)
    └── Fixer (Issue Resolution)
```

## Agent Tiers

agentful organizes agents into three distinct tiers, each serving different purposes:

### 1. Core Agents (Always Present)

Core agents ship with agentful out-of-the-box and handle fundamental development workflows.

**Characteristics:**
- Built into the framework
- Always available
- Technology-agnostic coordination
- Used by all projects

**Examples:**
- **Orchestrator** - Coordinates all development workflows
- **Architect** - Analyzes tech stack and generates specialized agents
- **Product Analyzer** - Validates product requirements
- **Backend** - Generic server-side implementation
- **Frontend** - Generic client-side implementation
- **Tester** - Writes comprehensive tests
- **Reviewer** - Validates code quality (9 checks)
- **Fixer** - Automatically fixes detected issues

**Location:** `.claude/agents/*.md`

### 2. Domain Agents (Generated Per-Project)

Domain agents are dynamically created by the Architect based on your tech stack.

**Characteristics:**
- Generated during project initialization
- Framework-specific implementations
- Follow your project's patterns
- Persistent throughout project lifecycle

**Examples:**
- **Next.js Specialist** - App Router, Server Components, RSC
- **Prisma Agent** - Schema management, migrations
- **Django Agent** - Models, views, ORM patterns
- **Flutter Agent** - Widget composition, state management
- **NestJS Agent** - Modules, controllers, services

**Location:** `.claude/agents/generated/`

**Generation:**
```
User runs: npx @itz4blitz/agentful init
  ↓
Architect analyzes: package.json, PRODUCT.md
  ↓
Detects: Next.js 14, Prisma, TailwindCSS
  ↓
Generates:
  - nextjs-specialist.md
  - prisma-agent.md
  - tailwind-agent.md
```

### 3. Ephemeral Agents (One-Off Tasks)

Ephemeral agents are temporary agents created for specific one-time tasks.

**Characteristics:**
- Created on-demand by Orchestrator
- Task-specific scope
- Destroyed after completion
- Used for non-repeatable work

**Examples:**
- **Data Migration** - Migrate users from MongoDB to PostgreSQL
- **Cleanup Task** - Remove deprecated code and dependencies
- **Security Audit** - Audit authentication flow for vulnerabilities
- **Performance Optimization** - Profile and optimize specific module
- **Data Import** - Import 10,000 products from CSV

**Location:** `.claude/agents/ephemeral/`

**Lifecycle:**
```
1. Orchestrator recognizes one-off task
2. Generates ephemeral agent definition
3. Spawns agent via Task tool
4. Agent completes task
5. Orchestrator cleans up (delete or archive)
```

**When to use:**
- ✅ One-time database migration
- ✅ Complex data transformation
- ✅ Large-scale cleanup project
- ✅ Security/performance audit
- ✅ Integration setup
- ❌ Regular feature work (use core/domain agents)
- ❌ Repeatable tasks (create domain agent)

### Comparison Table

| Feature | Core Agents | Domain Agents | Ephemeral Agents |
|---------|-------------|---------------|------------------|
| **Availability** | Always present | Per-project | On-demand |
| **Lifecycle** | Permanent | Project lifetime | Single task |
| **Creation** | Shipped with framework | Generated by Architect | Generated by Orchestrator |
| **Scope** | General workflows | Framework-specific | Task-specific |
| **Examples** | Orchestrator, Tester | Next.js Agent, Prisma | Migration, Cleanup |
| **Location** | `.claude/agents/` | `.claude/agents/generated/` | `.claude/agents/ephemeral/` |
| **Cleanup** | Never | Never | After completion |

## Core Agents

### Orchestrator Agent

The central coordinator that manages the entire development lifecycle.

**Responsibilities:**
- Reads and tracks project state
- Delegates work to specialist agents
- Manages completion tracking
- Handles user decisions and blockers
- Never writes code directly

**When to use:**
- Automatically invoked by `/agentful-start` or `/ralph-loop`
- Coordinates all other agents
- Should not be manually invoked

**Key files:**
- `.agentful/state.json` - Current work state
- `.agentful/completion.json` - Feature completion tracking
- `.agentful/decisions.json` - Pending user decisions

### Architect Agent

Analyzes the tech stack and generates framework-specific agents dynamically.

**Responsibilities:**
- Reads `PRODUCT.md` to identify technologies
- Generates specialized agents for frameworks (Next.js, Vue, NestJS, etc.)
- Creates architecture documentation
- Updates agents when tech stack changes

**When to use:**
- Automatically invoked on project initialization
- When tech stack changes in `PRODUCT.md`
- When new frameworks are added

**Key files:**
- `.agentful/architecture.json` - Detected tech stack
- `.claude/agents/generated/` - Dynamic agents

**See also:** [Architect Agent Documentation](/agents/architect)

### Product Analyzer Agent

Analyzes product requirements for quality, completeness, and readiness.

**Responsibilities:**
- Analyzes product specifications for gaps and ambiguities
- Identifies blocking issues before development starts
- Calculates readiness score (0-100%)
- Reverse-engineers product specs from existing code

**When to use:**
- Run `/agentful-product` to analyze requirements
- Before starting development to ensure specs are ready
- To detect gaps in product documentation

**Key files:**
- `.claude/product/product-analysis.json` - Analysis results
- `PRODUCT.md` or `.claude/product/` - Product specifications

**See also:** [Product Analyzer Command](/commands/agentful-product)

### Backend Agent

Implements server-side code following clean architecture patterns.

**Responsibilities:**
- API routes and controllers
- Service layer (business logic)
- Repository layer (data access)
- Database schemas and migrations
- Authentication and authorization
- Input validation

**When to use:**
- Delegated by Orchestrator for backend features
- Manual invocation: `@backend Implement user authentication`

**Scope:**
- ✅ API routes, services, repositories, database
- ❌ UI components, frontend pages, styles

### Frontend Agent

Implements client-side code and user interfaces.

**Responsibilities:**
- UI components and pages
- Custom React hooks
- State management
- Form handling and validation
- Styling and responsive design
- User interactions

**When to use:**
- Delegated by Orchestrator for frontend features
- Manual invocation: `@frontend Create login page`

**Scope:**
- ✅ Components, pages, hooks, styles
- ❌ API routes, database operations

### Tester Agent

Writes comprehensive tests to ensure code quality.

**Responsibilities:**
- Unit tests (services, components)
- Integration tests (API endpoints)
- E2E tests (user flows)
- Test fixtures and mocks
- Coverage reporting

**When to use:**
- Delegated by Orchestrator after implementation
- Manual invocation: `@tester Write tests for auth service`

**Key metric:**
- 80% code coverage threshold

### Reviewer Agent

Validates code quality and production readiness through 9 comprehensive checks.

**Responsibilities:**
- TypeScript type checking
- Lint validation
- Dead code detection
- Test validation
- Coverage verification
- Security scanning
- Documentation check
- Manual code review
- **DETECTS issues** (does not fix them)

**When to use:**
- Automatically invoked after any implementation
- Before marking features complete
- Manual invocation: `@reviewer Check all changes`

**Key files:**
- `.agentful/last-review.json` - Last review results

**See also:** [Reviewer Agent Documentation](/agents/reviewer)

### Fixer Agent

Automatically fixes issues found by the Reviewer.

**Responsibilities:**
- Removes dead code (unused exports, imports, files)
- Adds missing tests
- Removes debug statements
- Fixes hardcoded secrets
- Resolves type errors
- Fixes lint errors
- **FIXES issues** (that Reviewer detected)

**When to use:**
- Automatically invoked when Reviewer finds issues
- Manual invocation: `@fixer Fix all issues`

**Input:** `.agentful/last-review.json`

**See also:** [Fixer Agent Documentation](/agents/fixer)

## Agent Workflow

The typical agent workflow follows this pattern:

```
1. Orchestrator reads state
   ↓
2. Delegates to Backend/Frontend (implementation)
   ↓
3. Delegates to Tester (test coverage)
   ↓
4. Delegates to Reviewer (validation)
   ↓
5. If issues found → Fixer → Back to Reviewer
   ↓
6. Update completion state
   ↓
7. Loop until complete
```

## Agent Communication

Agents communicate through:

1. **State Files** - JSON files in `.agentful/`
2. **Task Tool** - Agent spawning and delegation
3. **File System** - Shared codebase
4. **Review Reports** - Validation results

## Agent Capabilities by Model

### Opus (Highest Reasoning)
- **Orchestrator** - Complex coordination, decision making
- **Architect** - Tech stack analysis, agent generation

### Sonnet (Balanced)
- **Backend** - Implementation with patterns
- **Frontend** - UI development
- **Tester** - Test writing
- **Reviewer** - Code validation
- **Fixer** - Issue resolution

## Best Practices

### For Users

1. **Let agents work autonomously** - Use `/ralph-loop` for hands-off development
2. **Check state files** - Monitor progress in `.agentful/completion.json`
3. **Respond to decisions** - Run `/agentful-decide` when blocked
4. **Trust the process** - Agents will iterate until completion

### For Customization

1. **Edit agent files** - Modify `.claude/agents/*.md` to customize behavior
2. **Add custom agents** - Create new agents in `.claude/agents/`
3. **Adjust thresholds** - Modify coverage requirements, rules, etc.
4. **Extend architecture** - Add new validation checks or patterns

## See Also

### Agent Documentation
- [Orchestrator Agent](/agents/orchestrator) - Central coordinator
- [Architect Agent](/agents/architect) - Tech stack analysis and agent generation
- [Product Analyzer Agent](/commands/agentful-product) - Requirements analysis
- [Backend Agent](/agents/backend) - Server-side implementation
- [Frontend Agent](/agents/frontend) - Client-side implementation
- [Tester Agent](/agents/tester) - Quality assurance
- [Reviewer Agent](/agents/reviewer) - Code validation
- [Fixer Agent](/agents/fixer) - Issue resolution
- [Custom Agents](/agents/custom-agents) - Create your own agents

### Related Commands
- [/agentful-start](/commands/agentful-start) - Start autonomous development
- [/agentful](/commands/agentful) - Quick reference
- [/agentful-product](/commands/agentful-product) - Analyze product requirements
- [/agentful-status](/commands/agentful-status) - Check project status
