# Architect Agent

Analyzes tech stack and generates framework-specific agents dynamically.

**Model:** Opus

**Tools:** Read, Write, Edit, Glob, Grep, Task

**Purpose:** Create specialized agents for your frameworks (Next.js, Django, Prisma, etc.)

## What It Does

1. **Reads PRODUCT.md** - Identifies tech stack
2. **Detects existing code** - Analyzes package.json, source files
3. **Generates agents** - Creates framework-specific agents in `.claude/agents/generated/`
4. **Updates on changes** - Regenerates when stack changes

## How to Use

```bash
# Run generation
/agentful-generate
```

Architect creates agents like:
- `nextjs-specialist.md` - Next.js App Router patterns
- `prisma-agent.md` - Database schema management
- `tailwind-agent.md` - Styling utilities
- `django-agent.md` - Django models, views, ORM

## Tech Stack Detection

Reads `PRODUCT.md` or analyzes existing code:

```markdown
## Tech Stack
- Framework: Next.js 14
- Language: TypeScript
- Database: PostgreSQL + Prisma
- Auth: JWT
- Styling: Tailwind CSS
- Testing: Vitest + Playwright
```

Creates `.agentful/architecture.json`:

```json
{
  "detected_stack": {
    "frontend": {
      "framework": "Next.js",
      "version": "14",
      "language": "TypeScript"
    },
    "backend": {
      "framework": "Next.js API Routes"
    },
    "database": {
      "provider": "PostgreSQL",
      "orm": "Prisma"
    },
    "styling": {
      "framework": "Tailwind CSS"
    },
    "testing": {
      "unit": "Vitest",
      "e2e": "Playwright"
    }
  },
  "generated_agents": [
    "nextjs-agent",
    "prisma-agent",
    "tailwind-agent"
  ],
  "timestamp": "2026-01-20T00:00:00Z"
}
```

## Supported Technologies

### Frontend

- Next.js (App Router, Pages Router)
- React (Hooks, Context)
- Vue (Composition API)
- Svelte
- Solid

### Backend

- Next.js API Routes
- Express
- NestJS
- Fastify
- Django
- FastAPI

### Database/ORM

- Prisma
- Drizzle
- TypeORM
- Mongoose
- Django ORM

### Styling

- Tailwind CSS
- CSS Modules
- styled-components
- shadcn/ui
- Chakra UI

### Testing

- Vitest
- Jest
- Playwright
- Cypress
- Testing Library

### State Management

- Zustand
- Redux
- Jotai
- Recoil
- TanStack Query

## Agent Template

Generated agents follow this structure:

```markdown
---
name: nextjs-specialist
description: Next.js 14 App Router patterns
model: sonnet
tools: Read, Write, Edit, Glob, Grep, Bash
---

# Next.js Specialist

## File Structure
\`\`\`
src/
├── app/
│   ├── page.tsx
│   └── api/
└── components/
\`\`\`

## Patterns

### Server Component
\`\`\`tsx
export default async function Page() {
  const data = await fetchData();
  return <div>{data}</div>;
}
\`\`\`

### Client Component
\`\`\`tsx
'use client';
export default function Interactive() {
  const [state, setState] = useState(0);
  return <button onClick={() => setState(s => s + 1)}>{state}</button>;
}
\`\`\`

## Rules
- Use App Router (not Pages Router)
- Server Components by default
- Add 'use client' only when needed
```

## Unknown Stack Handling

If no tech stack specified:

**Option 1:** Analyze existing code

```bash
grep -r "package.json" && detect frameworks
```

**Option 2:** Ask user

Adds to `decisions.json`:

```json
{
  "id": "tech-stack-001",
  "question": "What tech stack should we use?",
  "options": [
    "Next.js + TypeScript + Prisma",
    "React + Vite + Express",
    "Vue + Nuxt",
    "Custom (specify)"
  ],
  "blocking": ["agent-generation"]
}
```

**Option 3:** Use defaults

Next.js 14 + TypeScript + Prisma + Tailwind

## Self-Healing Updates

When tech stack changes:

```
[Detect] New framework added (e.g., tRPC)
  ↓
[Generate] Create trpc-agent.md
  ↓
[Update] architecture.json
  ↓
[Notify] Orchestrator can now use @trpc-agent
```

## Usage by Other Agents

After generation, Orchestrator can delegate:

```markdown
Task("nextjs-agent", "Create dashboard page with server components")
Task("prisma-agent", "Add user schema with email and password")
Task("tailwind-agent", "Style the login form")
```

## File Locations

```
.claude/agents/generated/
├── nextjs-specialist.md
├── prisma-agent.md
├── tailwind-agent.md
└── vitest-agent.md

.agentful/
└── architecture.json
```

## Monitoring

```bash
# View detected architecture
cat .agentful/architecture.json

# List generated agents
ls .claude/agents/generated/

# Regenerate all agents
/agentful-generate
```

## See Also

- [Agents Overview](/agents) - All agent types
- [Custom Agents](/agents/custom-agents) - Create your own
- [Orchestrator](/agents/orchestrator) - Uses generated agents
- [Backend](/agents/backend) - Generic backend patterns
- [Frontend](/agents/frontend) - Generic frontend patterns
