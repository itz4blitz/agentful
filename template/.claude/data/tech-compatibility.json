{
  "description": "Tech stack compatibility matrix for product analysis",
  "version": "1.0",
  "compatibility": {
    "orm": {
      "prisma": {
        "compatible_databases": ["postgresql", "mysql", "sqlite", "sqlserver", "cockroachdb"],
        "incompatible_databases": ["mongodb"],
        "notes": "Prisma is designed for relational databases only"
      },
      "mongoose": {
        "compatible_databases": ["mongodb"],
        "incompatible_databases": ["postgresql", "mysql", "sqlite", "sqlserver"],
        "notes": "Mongoose is MongoDB-specific ODM"
      },
      "drizzle": {
        "compatible_databases": ["postgresql", "mysql", "sqlite"],
        "incompatible_databases": ["mongodb"],
        "notes": "Drizzle supports relational databases"
      },
      "typeorm": {
        "compatible_databases": ["postgresql", "mysql", "sqlite", "sqlserver", "mongodb"],
        "incompatible_databases": [],
        "notes": "TypeORM supports both relational and MongoDB"
      }
    },
    "frameworks": {
      "nextjs": {
        "compatible_runtimes": ["node", "vercel-edge"],
        "recommended_databases": ["postgresql", "mysql", "sqlite", "mongodb"],
        "notes": "Next.js works best with serverless-friendly databases"
      },
      "express": {
        "compatible_runtimes": ["node", "bun"],
        "recommended_databases": ["postgresql", "mysql", "mongodb", "sqlite"],
        "notes": "Express is runtime agnostic"
      },
      "fastify": {
        "compatible_runtimes": ["node", "bun"],
        "recommended_databases": ["postgresql", "mysql", "mongodb", "sqlite"],
        "notes": "Fastify works with any database"
      },
      "nestjs": {
        "compatible_runtimes": ["node"],
        "recommended_databases": ["postgresql", "mysql", "mongodb", "sqlite"],
        "notes": "NestJS integrates well with TypeORM and Prisma"
      }
    },
    "auth": {
      "jwt": {
        "compatible_backends": ["express", "fastify", "nestjs", "nextjs-api"],
        "notes": "JWT is framework agnostic, requires implementation"
      },
      "nextauth": {
        "compatible_backends": ["nextjs-api"],
        "incompatible_backends": ["express", "fastify", "nestjs"],
        "notes": "NextAuth is Next.js specific"
      },
      "lucia": {
        "compatible_backends": ["express", "fastify", "nextjs-api", "nestjs"],
        "notes": "Lucia is framework agnostic"
      },
      "clerk": {
        "compatible_backends": ["nextjs-api", "express", "fastify"],
        "notes": "Third-party service, avoid unless explicitly required"
      }
    },
    "testing": {
      "vitest": {
        "compatible_languages": ["typescript", "javascript"],
        "compatible_frameworks": ["vue", "react", "svelte", "solid"],
        "notes": "Fast, Vite-powered testing framework"
      },
      "jest": {
        "compatible_languages": ["typescript", "javascript"],
        "compatible_frameworks": ["react", "vue", "angular", "node"],
        "notes": "Established testing framework, slower than Vitest"
      },
      "playwright": {
        "compatible_frameworks": ["nextjs", "react", "vue", "svelte", "angular"],
        "notes": "E2E testing, browser automation"
      },
      "cypress": {
        "compatible_frameworks": ["nextjs", "react", "vue", "svelte", "angular"],
        "notes": "E2E testing, component testing support"
      }
    },
    "real-time": {
      "socket.io": {
        "compatible_backends": ["express", "fastify", "nestjs"],
        "incompatible_backends": ["nextjs-api"],
        "notes": "Requires persistent connections, not ideal for serverless"
      },
      "server-sent-events": {
        "compatible_backends": ["express", "fastify", "nextjs-api", "nestjs"],
        "notes": "One-way real-time, works with serverless"
      },
      "websockets": {
        "compatible_backends": ["express", "fastify", "nestjs"],
        "incompatible_backends": ["nextjs-api"],
        "notes": "Native WebSockets, requires persistent connections"
      }
    }
  },
  "common_issues": [
    {
      "pattern": "prisma + mongodb",
      "severity": "blocking",
      "message": "Prisma does not support MongoDB for relational features",
      "recommendation": "Use Mongoose for MongoDB OR use PostgreSQL/MySQL with Prisma"
    },
    {
      "pattern": "nextauth + express",
      "severity": "blocking",
      "message": "NextAuth is Next.js specific and incompatible with Express",
      "recommendation": "Use JWT or Lucia for Express-based auth"
    },
    {
      "pattern": "socket.io + nextjs-api",
      "severity": "warning",
      "message": "Socket.io requires persistent connections, difficult with Next.js serverless",
      "recommendation": "Use Server-Sent Events OR deploy to long-running server (not Vercel)"
    },
    {
      "pattern": "mongoose + postgresql",
      "severity": "blocking",
      "message": "Mongoose is MongoDB-specific, incompatible with PostgreSQL",
      "recommendation": "Use Prisma/Drizzle for PostgreSQL OR MongoDB with Mongoose"
    }
  ]
}
